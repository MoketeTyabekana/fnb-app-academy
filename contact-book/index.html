<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <link rel="stylesheet" href="style.css" />
  </head>
  <body onload="fetchContacts()">
    <div id="table">
      <p id="loading-text">Contacts Loading...</p>
    </div>
    <div class="buttons">
      <button id="refresh">Refresh</button>
      <button id="addContact">Add New Contact</button>
    </div>

    <script src="config.js"></script>
    <script>

      function fetchContacts() {
        fetch(rootPath + "controller/get-contacts/").then(function (response) {
          return response.json();
        })
        .then(function(data){
            displayOutput(data);
           
        })
      }

       function displayOutput(contactArray) {
            output = "<table class='table'>";

            for (a in contactArray) {
                output += `
                    <tr onclick="editContact(${contactArray[a].id})">
                        <td><img src="${rootPath}controller/uploads/${contactArray[a].avatar}" width="40" height="40"/></td>
                        <td><h5 style="margin-top: 9px" >${contactArray[a].firstname}</h5></td>
                        <td><h5 style="margin-top: 9px" >${contactArray[a].lastname}</h5></td>
                    </tr>
                    `;
            }

            output += "</table>";
            document.getElementById("table").innerHTML = output;

        }

    </script>
  </body>
</html>
